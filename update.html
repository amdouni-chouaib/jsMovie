<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Register </title>
</head>
<body>
    <style>
        body{
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            width: 100vw;
            height: 100vh;
        }
    </style>
        
  

    <div class="card" style="width: 18rem;">
        <center><h3>Update profile</h3></center>
        <div class="card-body">
            <input type="text" name="fullname" id="nameimp" placeholder="Full name" class="form-control mb-3" value="">
            <input type="email" name="email" id="emailimp" placeholder="email" class="form-control mb-3" value="">
            <input type="text" name="username" id="userimp" placeholder="username" class="form-control mb-3" value="" readonly>
            <input type="password" name="password" id="passwordimp" placeholder="password" class="form-control mb-3" value="">
            <button type="submit" id="sub_but" class="btn btn-success">Update</button>
            
        </div>
      </div>



    <script  type="module">
// Import the functions you need from the SDKs you need
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAcH-RZrNHD3nrmRxrA7En1Bd5U9UBHMSA",
    authDomain: "jsnative-2f45c.firebaseapp.com",
    databaseURL: "https://jsnative-2f45c-default-rtdb.firebaseio.com",
    projectId: "jsnative-2f45c",
    storageBucket: "jsnative-2f45c.appspot.com",
    messagingSenderId: "122734953593",
    appId: "1:122734953593:web:c467bd1c1e31ebff4500a8"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);

  import{getDatabase , child,ref ,set,get ,update,remove} from "https://www.gstatic.com/firebasejs/9.14.0/firebase-database.js";
  
  const db = getDatabase();

  var name = document.getElementById('nameimp')
  var mail = document.getElementById('emailimp')
  var pass = document.getElementById('passwordimp')
  var username = document.getElementById('userimp')
  const submit = document.getElementById('sub_but')

        
        
        console.log(name.value)
        
         mail.value = JSON.parse(localStorage.getItem("user")).email
       username.value = JSON.parse(localStorage.getItem("user")).username
      pass.value = JSON.parse(localStorage.getItem("user")).password
      name.value = JSON.parse(localStorage.getItem("user")).fullname
        
       
     const dbRef = ref(db); //database refence 
     function updatee(){
        update(ref(db, 'UsersList/' + JSON.parse(localStorage.getItem("user")).username),{
      email: mail.value ,
      fullname:name.value,
      password:pass.value 
      })
      alert('updated');
     }
     submit.addEventListener('click',updatee)

    </script>
</body>
</html>